# Dumb Installer
Dumb Installer installs a project as a system-wide executable by copying it to /opt and generating a wrapper in /usr/local/bin. It’s ideal for small scripts or tools that aren’t worth packaging with setuptools, AUR, or distro packages.
## Installation
```bash
git clone https://github.com/Ben-Collett/dumb_installer
cd dumb_installer/
sudo python dumb_installer.py
```

You should now have an executable named din in your path.

## Usage
### Installing project
To run this program you simply run sudo din in the directory of the project you want to install. This project must have a dumb_build.toml

The dumb_build.toml should have a build tag which allows the following options

* **required:** executable_name: defines the name of the executable program. For example in this project you will see `executable_name = "din"` since that is the name of the program installed.
* **required** command: the command to run when the program executes you will likely want to access the path of the project using the `$dumb_project_dir` variable. For example this project uses command = "python $dumb_project_dir/dumb_installer.py"
* exclude: files that will be excluded when creating a copy of this project. Takes a list of string representing patterns and defaults to `["__pycache__", "*.pyc", ".git", "dumb_build.toml", "LICENSE", "README.md"]` if you don't override it. So your program relies on those files you will need to override it. 

example dumb_build.toml
```toml
[build]
executable_name = "mytool"
command = "python $dumb_project_dir/main.py"

exclude = [
  "__pycache__",
  "*.pyc",
  ".git"
]
```

### Uninstalling project
Simply run 
`sudo din -E <program_name>`
to uninstall a program installed through dumb_installer

So to uninstall the dumb installer you run `sudo din -E din`

To see the options available run `din -h`

## How it works
The current project directory is copied to `/opt/dumb_builds/<executable_name>` The copy will exclude any files defined by the exclude key in the dumb_build.toml

There is then a wrapper shell file created using the command field at `/usr/local/bin/<executable_name>`

The wrapper file has the following structure
```sh
#!/usr/bin/env sh
dumb_project_dir=<project_dir>
<command> "$@"
```
As an example here is the one generated by building this project

```sh
#!/usr/bin/env sh
dumb_project_dir=/opt/dumb_builds/din
python "$dumb_project_dir/dumb_installer.py" "$@"
```
This is why you will often want to use $dumb_project_dir in your command to access the path of the file you want to execute or call a command on. Because if you don't it will try to run the command in your current working directory 

When uninstalling the dumb_installer simply deletes the dumb_project_dir and the executable file. If there are no files left in `/opt/dumb_builds/` it will be automatically removed until the next time you install a project.

## LICENSE
This project is licensed under [BSD Zero](LICENSE)
